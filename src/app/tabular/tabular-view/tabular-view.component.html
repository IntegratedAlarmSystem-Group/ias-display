<mat-card>

  <mat-card-header>
    <app-legend></app-legend>
  </mat-card-header>


  <mat-card-content>

    <div fxLayout="row wrap" fxLayoutAlign="space-between" fxLayoutGap="20px">
      <span mat-form-field fxFlex >
        <input matInput [value]="filterString" (keyup)="onKeyUp($event)" placeholder="Enter keywords to filter...">
      </span>
      <mat-slide-toggle [checked]="_setFilterActivated" (change)="toggleFilterOnlySetAlarm()">
        Show only set alarms
      </mat-slide-toggle>
    </div>

    <mat-table #table [dataSource]="dataSource" matSort>

      <!-- Status Column -->
      <ng-container matColumnDef="status">
        <mat-header-cell *matHeaderCellDef>
          <span mat-sort-header> Status </span>
        </mat-header-cell>
        <mat-cell *matCellDef="let alarm">
          <div class="status-icon">
            <app-status-view [alarm]="alarm" [value]="alarm.status" ></app-status-view>
          </div>
        </mat-cell>
      </ng-container>

      <!-- Monitoring Point Column -->
      <ng-container matColumnDef="name">
        <mat-header-cell *matHeaderCellDef>
          <span mat-sort-header> Alarm Name </span>
        </mat-header-cell>
        <mat-cell *matCellDef="let alarm"> {{alarm.name}} </mat-cell>
      </ng-container>

      <!-- Mode Column -->
      <ng-container matColumnDef="mode">
        <mat-header-cell *matHeaderCellDef>
          <span mat-sort-header> Mode </span>
        </mat-header-cell>
        <mat-cell *matCellDef="let alarm"> {{alarm.operationalMode}} </mat-cell>
      </ng-container>

      <!-- Timestamp Column -->
      <ng-container matColumnDef="timestamp">
        <mat-header-cell *matHeaderCellDef>
          <span mat-sort-header> Last Change Time </span>
        </mat-header-cell>
        <mat-cell *matCellDef="let alarm"> {{ alarm.timestamp | date: dateFormat: timezone }} </mat-cell>
      </ng-container>

      <!-- Description Column -->
      <ng-container matColumnDef="description">
        <mat-header-cell *matHeaderCellDef>
          <span mat-sort-header> Description </span>
        </mat-header-cell>
        <mat-cell *matCellDef="let alarm"> {{alarm.description}} </mat-cell>
      </ng-container>

      <!-- Actions Column -->
      <ng-container matColumnDef="actions">
        <mat-header-cell *matHeaderCellDef>
          <span mat-sort-header> Actions </span>
        </mat-header-cell>
        <mat-cell *matCellDef="let alarm">
          <app-buttons [alarm]="alarm" [url]="alarm.url"></app-buttons>
        </mat-cell>
      </ng-container>

      <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
      <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
    </mat-table>
  </mat-card-content>
  <mat-card-footer></mat-card-footer>

</mat-card>
